{"ast":null,"code":"var _jsxFileName = \"/Users/sonjong-il/Desktop/wecode/12-AIG-frontend/src/pages/Cart/Cart.js\";\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport CartItem from \"./components/CartItem\";\nimport PriceContainer from \"./components/PriceContainer\";\nexport default function Cart() {\n  const [cart, setCart] = useState();\n  const [totalPrice, setTotalPrice] = useState(0);\n  useEffect(() => {\n    fetchCart();\n  }, []);\n\n  const fetchCart = async () => {\n    const result = await fetch(`/Data/cart-Data.json`);\n    const {\n      data\n    } = await result.json();\n    setCart(data);\n  };\n\n  const totalCalc = () => {\n    const price = cart === null || cart === void 0 ? void 0 : cart.products.reduce((accumulator, item) => {\n      return accumulator + item.price * item.count;\n    }, 0);\n    setTotalPrice(price);\n  };\n\n  useEffect(() => {\n    totalCalc();\n  }, [cart, totalCalc]);\n\n  const deleteCart = i => {\n    const cartList = { ...cart\n    };\n    const updateItem = cartList.products.filter(item => item.id !== cart.products[i].id);\n    cartList.products = updateItem;\n    setCart(cartList);\n  };\n\n  const fetchRemove = i => {\n    console.log(cart.products[i].cart_id);\n    console.log(cart.products[i].count);\n    const result = fetch(`http://10.58.3.184:8000/cart/cart`, {\n      method: cart.products[i].count !== 0 ? \"patch\" : \"patch\",\n      // header: JSON.stringify({Authorization: localStorage.getItem(\"token\")}),\n      body: JSON.stringify({\n        cart_id: cart.products[i].cart_id,\n        // product_id: cart.products[i].id,\n        count: cart.products[i].count\n      })\n    }).then(response => response.json()).then(fetchResult => console.log(fetchResult)); // console.log(result.json())\n  };\n\n  const fetchCount = i => {\n    console.log(cart.products[i].cart_id);\n    console.log(cart.products[i].count);\n    const changeResult = fetch(`http://10.58.3.184:8000/cart/cart`, {\n      method: cart.products[i].count !== 0 && \"patch\",\n      // header: JSON.stringify({Authorization: localStorage.getItem(\"token\")}),\n      body: JSON.stringify({\n        cart_id: cart.products[i].cart_id,\n        // product_id: cart.products[i].id,\n        count: cart.products[i].count\n      })\n    }).then(response => response.json()).then(fetchResult => console.log(fetchResult)); // console.log(result.json())\n  };\n\n  const changeCount = (i, change) => {\n    const cartList = { ...cart\n    };\n    const updateItem = {\n      \"id\": cart.products[i].id,\n      \"cart_id\": cart.products[i].cart_id,\n      \"title\": cart.products[i].title,\n      \"count\": cart.products[i].count + change,\n      \"price\": cart.products[i].price,\n      \"size\": cart.products[i].size,\n      \"color\": cart.products[i].color,\n      \"serial_num\": cart.products[i].serial_num,\n      \"main_image\": cart.products[i].main_image\n    };\n    cartList.products[i] = updateItem;\n    setCart(cartList);\n\n    if (cartList.products[i].count === 0 && change === -1) {\n      fetchCount(i);\n      deleteCart(i);\n    } else {\n      fetchCount(i);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Nav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, \"\\uC9C4\\uD76C Nav\")), /*#__PURE__*/React.createElement(Section, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CartContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, \"Shopping bag\"), cart === null || cart === void 0 ? void 0 : cart.products.map((item, i) => {\n    return /*#__PURE__*/React.createElement(CartItem, {\n      key: i,\n      cart: cart,\n      i: i,\n      item: item,\n      changeCount: changeCount,\n      deleteCart: deleteCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 15\n      }\n    });\n  })), /*#__PURE__*/React.createElement(PriceContainer, {\n    totalPrice: totalPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  })));\n}\nconst Nav = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 60px;\n  background-color: yellow;\n  text-align: center;\n  span {\n    font-size: 40px;\n  }\n`;\nconst Section = styled.section`\n  display: flex;\n  justify-content: center;\n  max-width: 1000px;\n  margin: 0 auto;\n`;\nconst CartContainer = styled.div`\n  margin-right: 40px;\n  width: calc(66.66% - 20px);\n  border-bottom: 2px solid black;\n  margin-bottom: 100px;\n  height: 100%;\n  h2 {\n    margin-top: 20px;\n    padding-bottom: 13px;\n    font-size: 20px;\n    border-bottom: 2px solid black;\n  }\n`;","map":{"version":3,"sources":["/Users/sonjong-il/Desktop/wecode/12-AIG-frontend/src/pages/Cart/Cart.js"],"names":["React","useState","useEffect","styled","CartItem","PriceContainer","Cart","cart","setCart","totalPrice","setTotalPrice","fetchCart","result","fetch","data","json","totalCalc","price","products","reduce","accumulator","item","count","deleteCart","i","cartList","updateItem","filter","id","fetchRemove","console","log","cart_id","method","body","JSON","stringify","then","response","fetchResult","fetchCount","changeResult","changeCount","change","title","size","color","serial_num","main_image","map","Nav","div","Section","section","CartContainer"],"mappings":"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","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport CartItem from \"./components/CartItem\";\nimport PriceContainer from \"./components/PriceContainer\";\n\nexport default function Cart() {\n  const [cart, setCart] = useState();\n  const [totalPrice, setTotalPrice] = useState(0);\n\n  useEffect(() => {\n    fetchCart();\n  }, []);\n\n  const fetchCart = async () => {\n    const result = await fetch(`/Data/cart-Data.json`);\n    const {data} = await result.json();\n    setCart(data);\n  };\n\n  const totalCalc = () => {\n    const price = cart?.products.reduce((accumulator, item) => {\n      return accumulator + item.price * item.count;\n    }, 0);\n    setTotalPrice(price);\n  }\n\n  useEffect(() => {\n    totalCalc()\n  }, [cart, totalCalc]);\n  \n  const deleteCart = (i) => {\n    const cartList = {...cart};\n    const updateItem  =cartList.products.filter(item => item.id !== cart.products[i].id)\n    cartList.products= updateItem\n    setCart(cartList)\n  }\n\n  const fetchRemove = (i) => {\n    console.log(cart.products[i].cart_id)\n    console.log(cart.products[i].count)\n    const result = fetch(`http://10.58.3.184:8000/cart/cart`, {\n      method: cart.products[i].count !== 0 ? \"patch\" : \"patch\",\n      // header: JSON.stringify({Authorization: localStorage.getItem(\"token\")}),\n      body: JSON.stringify({\n        cart_id: cart.products[i].cart_id,\n        // product_id: cart.products[i].id,\n        count: cart.products[i].count\n      }),\n    })\n    .then((response) => response.json())\n    .then((fetchResult) => console.log(fetchResult))\n    // console.log(result.json())\n  }\n\n  const fetchCount = (i) => {\n    console.log(cart.products[i].cart_id)\n    console.log(cart.products[i].count)\n    const changeResult = fetch(`http://10.58.3.184:8000/cart/cart`, {\n      method: cart.products[i].count !== 0 && \"patch\",\n      // header: JSON.stringify({Authorization: localStorage.getItem(\"token\")}),\n      body: JSON.stringify({\n        cart_id: cart.products[i].cart_id,\n        // product_id: cart.products[i].id,\n        count: cart.products[i].count\n      }),\n    })\n    .then((response) => response.json())\n    .then((fetchResult) => console.log(fetchResult))\n    // console.log(result.json())\n  }\n\n  const changeCount = (i, change) => {\n    const cartList = {...cart};\n    const updateItem = {\n      \"id\": cart.products[i].id,\n      \"cart_id\": cart.products[i].cart_id,\n      \"title\": cart.products[i].title,\n      \"count\": cart.products[i].count + change,\n      \"price\": cart.products[i].price,\n      \"size\": cart.products[i].size,\n      \"color\": cart.products[i].color,\n      \"serial_num\": cart.products[i].serial_num,\n      \"main_image\": cart.products[i].main_image\n    }\n    cartList.products[i] = updateItem\n    setCart(cartList)\n\n    if(cartList.products[i].count === 0 && change === -1) {\n      fetchCount(i)\n      deleteCart(i)\n\n    }\n    else {\n      fetchCount(i)\n    }\n  }\n\n  return (\n    <>\n      <Nav>\n        <span>진희 Nav</span>\n      </Nav>\n      <Section>\n        <CartContainer>\n          <h2>Shopping bag</h2>\n          {cart?.products.map((item, i) => {\n            return (\n              <CartItem \n              key={i}\n              cart={cart} \n              i={i} \n              item={item} \n              changeCount={changeCount}\n              deleteCart={deleteCart}\n              />\n            );\n          })}\n        </CartContainer>\n        <PriceContainer totalPrice={totalPrice}/>\n      </Section>\n    </>\n  );\n}\n\nconst Nav = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 60px;\n  background-color: yellow;\n  text-align: center;\n  span {\n    font-size: 40px;\n  }\n`;\n\nconst Section = styled.section`\n  display: flex;\n  justify-content: center;\n  max-width: 1000px;\n  margin: 0 auto;\n`;\n\nconst CartContainer = styled.div`\n  margin-right: 40px;\n  width: calc(66.66% - 20px);\n  border-bottom: 2px solid black;\n  margin-bottom: 100px;\n  height: 100%;\n  h2 {\n    margin-top: 20px;\n    padding-bottom: 13px;\n    font-size: 20px;\n    border-bottom: 2px solid black;\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}